<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Insurance Helper</title>
  <link rel="stylesheet" href="styles.css" />
  <link rel="stylesheet" href="rta-form.css" />
  <link rel="stylesheet" href="price/price.css" />
    <style>
      /* Sidebar layout */
      #sidebar {
        position: fixed;
        top: 0;
        bottom: 0;
        left: 0;
        height: 100vh;
        overflow-y: auto;
        z-index: 30;
      }
      body.sidebar-visible #sidebar {
        display: flex;
      }

      #appShell {
        min-height: 100vh;
        padding-left: 0;
        transition: padding-left 0.2s ease;
      }
      body.sidebar-visible #appShell {
        padding-left: 16rem;
      }
      body.sidebar-visible.sidebar-collapsed #appShell {
        padding-left: 64px;
      }

      /* Sidebar collapse */
      body.sidebar-collapsed #sidebar {
        width: 64px;
      }
      body.sidebar-collapsed #sidebar h2,
      body.sidebar-collapsed #sidebar .service-btn span {
        display: none;
      }
      body.sidebar-collapsed #sidebar .service-btn {
        justify-content: center;
        padding: 12px;
      }
      body.sidebar-collapsed #sidebarToggle {
        display: none;
      }
      body.sidebar-collapsed #sidebarOpenToggle {
        display: block !important;
      }

      /* Bot√µes de servi√ßo */
      .service-btn {
        display: flex;
        align-items: center;
        gap: 12px;
        padding: 12px 16px;
        border-radius: 8px;
        background: rgba(15, 23, 42, 0.5);
        color: rgb(148, 163, 184);
        border: 1px solid rgba(51, 65, 85, 0.5);
        cursor: pointer;
        transition: all 0.2s;
        font-size: 14px;
        font-weight: 500;
        width: 100%;
        text-align: left;
        pointer-events: auto;
        position: relative;
        z-index: 10;
      }
      .service-btn:hover {
        background: rgba(30, 41, 59, 0.7);
        color: rgb(226, 232, 240);
        border-color: rgba(71, 85, 105, 0.8);
      }
      .service-btn.active {
        background: rgba(59, 130, 246, 0.2);
        color: rgb(96, 165, 250);
        border-color: rgba(59, 130, 246, 0.5);
      }
      .service-btn-icon {
        width: 36px;
        height: 36px;
        border-radius: 12px;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        flex-shrink: 0;
        background: rgba(148, 163, 184, 0.15);
        color: rgb(226, 232, 240);
        pointer-events: none;
      }
      .service-btn-icon svg {
        width: 20px;
        height: 20px;
        pointer-events: none;
      }
      .service-btn-icon .service-btn-emoji {
        font-size: 18px;
      }
      .service-btn span {
        pointer-events: none;
      }
      .service-btn-emoji {
        font-size: 18px;
      }
      .service-btn:disabled {
        cursor: not-allowed;
        opacity: 0.6;
      }
      .service-btn:disabled:hover {
        background: rgba(15, 23, 42, 0.5);
        color: rgb(148, 163, 184);
        border-color: rgba(51, 65, 85, 0.5);
      }

      .howto-steps {
        list-style: decimal;
        padding-left: 1.25rem;
        margin: 0;
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
        color: rgb(203, 213, 225);
        font-size: 0.875rem;
      }

      .howto-note {
        font-size: 0.75rem;
        color: rgba(148, 163, 184, 0.8);
      }

      /* Views */
      .service-view {
        display: none;
      }
      .service-view.active-view {
        display: block;
      }

      /* Sele√ß√£o de m√≥dulos */
      .module-card {
        display: flex;
        flex-direction: column;
        gap: 0.75rem;
        align-items: flex-start;
        width: 100%;
        border-radius: 1rem;
        border: 1px solid rgba(51, 65, 85, 0.5);
        background: rgba(15, 23, 42, 0.65);
        padding: 1.5rem;
        transition: transform 0.2s ease, border-color 0.2s ease, background 0.2s ease;
        text-align: left;
        cursor: pointer;
      }

      .module-card:hover {
        transform: translateY(-4px);
        border-color: rgba(59, 130, 246, 0.5);
        background: rgba(30, 41, 59, 0.7);
      }

      .module-card[disabled] {
        cursor: not-allowed;
        opacity: 0.6;
        transform: none;
      }

      .module-card[disabled]:hover {
        transform: none;
        border-color: rgba(51, 65, 85, 0.5);
        background: rgba(15, 23, 42, 0.65);
      }

      .add-profile-card {
        justify-content: center;
        text-align: center;
        border: 2px dashed rgba(71, 85, 105, 0.6);
        background: rgba(15, 23, 42, 0.55);
        color: rgba(148, 163, 184, 0.9);
        gap: 0.75rem;
      }

      .add-profile-card:hover {
        border-color: rgba(59, 130, 246, 0.6);
        color: rgba(96, 165, 250, 1);
        transform: translateY(-4px);
      }

      .add-profile-card[disabled] {
        cursor: not-allowed;
        opacity: 0.5;
        border-color: rgba(71, 85, 105, 0.4);
        color: rgba(148, 163, 184, 0.6);
        transform: none;
      }

      .add-profile-icon {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        width: 3.5rem;
        height: 3.5rem;
        border-radius: 9999px;
        background: rgba(59, 130, 246, 0.15);
        color: rgba(96, 165, 250, 1);
        font-size: 1.75rem;
      }

      .module-card:focus-visible {
        outline: none;
        border-color: rgba(59, 130, 246, 0.8);
        box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.2);
      }

      .module-card-icon-wrapper {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        width: 3rem;
        height: 3rem;
        border-radius: 0.75rem;
        background: rgba(59, 130, 246, 0.12);
        color: rgba(96, 165, 250, 1);
      }

      .module-card-icon {
        width: 1.75rem;
        height: 1.75rem;
        font-size: 1.5rem;
      }

      .module-card-title {
        font-size: 1.125rem;
        font-weight: 600;
        color: #e2e8f0;
      }

      .module-card-description {
        font-size: 0.875rem;
        color: rgba(148, 163, 184, 0.9);
      }
    </style>
  </head>
  <body class="antialiased">
  <div id="appShell" class="min-h-screen flex">
  <!-- Sidebar √† esquerda -->
  <aside id="sidebar" class="w-64 bg-slate-900/50 border-r border-slate-800 flex flex-col p-4 gap-4 hidden">
        <div class="flex items-center justify-between mb-2">
          <h2 class="text-lg font-semibold text-white">Servi√ßos</h2>
          <button id="sidebarToggle" class="text-slate-400 hover:text-white text-2xl leading-none" title="Minimizar sidebar">‚Äπ</button>
        </div>
        <nav id="servicesNav" class="flex flex-col gap-2">
          <!-- Itens de servi√ßos s√£o renderizados via renderer.js -->
        </nav>
      </aside>

      <!-- Conte√∫do principal -->
      <div class="flex-1 flex flex-col">
  <header class="bg-slate-900/30 border-b border-slate-800 px-6 py-4">
          <div class="flex items-center justify-between">
            <div class="flex items-center gap-3">
              <button id="sidebarOpenToggle" class="hidden text-slate-400 hover:text-white text-2xl leading-none" title="Mostrar sidebar">‚ò∞</button>
              <h1 class="text-3xl font-semibold text-white">Insurance Helper</h1>
            </div>
            <div class="flex items-center gap-3">
              <p class="text-sm text-slate-400 hidden md:block">Use os bot√µes de servi√ßos para trocar de m√≥dulo.</p>
              <button id="editProfileBtn" class="btn-secondary" disabled>‚úé Editar perfil</button>
              <button id="backToProfilesGlobal" class="btn-secondary"><span aria-hidden="true">‚Üê</span> Trocar operador</button>
            </div>
          </div>
        </header>

  <main class="flex-1 overflow-auto px-6 py-8">
          <div class="mx-auto max-w-7xl">

          <section id="selectionView" class="flex flex-col gap-6" style="display: flex;">
          <div class="card">
            <div class="flex flex-col gap-4 md:flex-row md:items-center md:justify-between">
              <div class="space-y-2">
                <h2 class="text-2xl font-semibold text-white">Selecione quem vai disparar</h2>
              </div>
            </div>
          </div>

          <div id="profilesContainer" class="grid gap-5 sm:grid-cols-2 lg:grid-cols-3">
            <!-- Os cards dos perfis ser√£o inseridos aqui dinamicamente -->
          </div>
        </section>

          <section id="moduleSelectionView" class="flex flex-col gap-6" style="display: none;">
          <div class="card space-y-2">
            <h2 class="text-2xl font-semibold text-white">Escolha o m√≥dulo</h2>
            <p class="text-sm text-slate-400">Selecione qual m√≥dulo deseja utilizar com o operador escolhido.</p>
          </div>
          <div id="moduleCards" class="grid gap-5 sm:grid-cols-2 xl:grid-cols-3"></div>
        </section>

          <section id="controlView" class="flex-col gap-6" style="display: none;">
          <div class="card flex flex-col gap-4 md:flex-row md:items-center md:justify-between">
            <div>
              <div class="space-y-1">
                <p class="text-sm uppercase tracking-wide text-slate-400">Operador selecionado</p>
                <h2 id="activeProfileName" class="text-2xl font-semibold text-white">‚Äî</h2>
              </div>
            </div>
            <div class="flex items-center gap-4">
              <button id="startButton" class="btn-primary">Iniciar envios</button>
              <button id="stopButton" class="btn-secondary" disabled>Parar envios</button>
            </div>
          </div>

          <div class="grid gap-6 lg:grid-cols-[minmax(0,320px)_1fr]">
            <article class="card space-y-4">
              <header class="space-y-1">
                <p class="text-sm uppercase tracking-wide text-slate-400">Mensagens salvas</p>
                <h3 class="text-lg font-semibold text-white">Gerenciar mensagens</h3>
              </header>
              
              <div id="messagesList" class="space-y-2 max-h-96 overflow-y-auto">
                <!-- Lista de mensagens ser√° inserida aqui -->
              </div>
              
              <button id="addMessageBtn" class="btn-secondary w-full">
                <span aria-hidden="true">+</span> Adicionar mensagem
              </button>
              
              <div class="pt-4 border-t border-slate-700">
                <p class="text-sm uppercase tracking-wide text-slate-400 mb-2">Configura√ß√µes</p>
                <div class="space-y-2">
                  <label for="sendLimitInput" class="block text-sm font-medium text-slate-300">
                    N√∫mero de grupos para enviar
                  </label>
                  <input 
                    type="number" 
                    id="sendLimitInput" 
                    min="1" 
                    max="1000" 
                    class="w-full rounded-lg bg-slate-800 border border-slate-700 text-white px-4 py-2 focus:outline-none focus:ring-2 focus:ring-brand-500"
                    placeholder="200"
                  />
                  <button id="saveSendLimitBtn" class="btn-secondary w-full text-sm">
                    üíæ Salvar configura√ß√£o
                  </button>
                </div>
              </div>
              
              <div class="pt-4 border-t border-slate-700">
                <p class="text-sm uppercase tracking-wide text-slate-400 mb-2">Mensagem selecionada</p>
                <pre id="activeProfileMessage" class="max-h-48 overflow-y-auto whitespace-pre-wrap rounded-xl bg-slate-950/60 p-4 text-sm text-slate-200"></pre>
              </div>
            </article>

            <section class="card space-y-4">
              <header class="flex items-center justify-between">
                <div>
                  <p class="text-sm uppercase tracking-wide text-slate-400">Status em tempo real</p>
                  <h3 class="text-lg font-semibold text-white">Execu√ß√£o atual</h3>
                </div>
                <span id="statusBadge" class="tag bg-emerald-500/10 text-emerald-300">Aguardando</span>
              </header>
              <p id="statusText" class="text-sm text-slate-300">Escolha um operador e clique em iniciar para come√ßar.</p>
              <div class="space-y-3">
                <h4 class="text-sm font-semibold text-slate-200">Logs recentes</h4>
                <div id="logContainer" class="max-h-72 overflow-y-auto rounded-xl bg-slate-950/60 p-4 text-xs text-slate-300"></div>
              </div>
            </section>
          </div>
          </section>

          <!-- Conte√∫do do RTA -->
          <section id="rtaView" class="flex-col gap-6" style="display: none;">
            <div class="card space-y-4">
              <header class="space-y-1">
                <p class="text-sm uppercase tracking-wide text-slate-400">RTA Autom√°tico</p>
                <h3 class="text-lg font-semibold text-white">Gerar RTA</h3>
              </header>
                <form id="rtaForm" class="rta-form">
                  <section class="rta-section" aria-labelledby="rta-transaction">
                    <div class="rta-section-header">
                      <div class="rta-section-icon" aria-hidden="true">üìã</div>
                      <div>
                        <h4 class="rta-section-title" id="rta-transaction">Tipo de Transa√ß√£o</h4>
                        <p class="rta-section-description">Selecione o tipo de opera√ß√£o que deseja realizar.</p>
                      </div>
                    </div>
                    <div class="rta-grid rta-grid-auto">
                      <div class="input-group">
                        <label for="transaction_type">I want to:</label>
                        <select id="transaction_type" name="transaction_type" class="input-control">
                          <option value="Reg and Title a Vehicle" selected>Register and title a vehicle</option>
                          <option value="Transfer Plate">Transfer plate to a new vehicle</option>
                          <option value="Reinstate Reg">Reinstate a registration</option>
                          <option value="Apply for salvage title">Apply for a salvage title</option>
                          <option value="Apply for title">Apply for a title only</option>
                          <option value="Registration only">Apply for a registration only</option>
                          <option value="Transfer plate">Transfer a plate between two vehicles</option>
                          <option value="Register prev title">Register previously titled vehicle</option>
                          <option value="Title prev reg vehicle">Title previously registered vehicle</option>
                          <option value="Transfer vehicle to spouse">Transfer vehicle to surviving spouse</option>
                          <option value="Change plate">Change plate on existing vehicle with no amendments</option>
                          <option value="Renew reg">Renew a registration</option>
                        </select>
                      </div>
                    </div>
                  </section>

                  <section class="rta-section" aria-labelledby="rta-insurance">
                    <div class="rta-section-header">
                      <div class="rta-section-icon" aria-hidden="true">üõ°Ô∏è</div>
                      <div>
                        <h4 class="rta-section-title" id="rta-insurance">Seguradora</h4>
                        <p class="rta-section-description">Escolha a seguradora respons√°vel antes de preencher os demais dados.</p>
                      </div>
                    </div>
                    <div class="rta-grid rta-grid-auto">
                      <div class="input-group">
                        <label for="insurance_company">Seguradora</label>
                        <select id="insurance_company" name="insurance_company" class="input-control">
                          <option value="">Selecione</option>
                          <option value="allstate">Allstate</option>
                          <option value="progressive">Progressive</option>
                          <option value="geico">Geico</option>
                          <option value="liberty">Liberty</option>
                        </select>
                      </div>
                    </div>
                  </section>
                  <section class="rta-section" aria-labelledby="rta-vehicle">
                    <div class="rta-section-header">
                      <div class="rta-section-icon" aria-hidden="true">ÔøΩ</div>
                      <div>
                        <h4 class="rta-section-title" id="rta-vehicle">Ve√≠culo</h4>
                        <p class="rta-section-description">Detalhes do ve√≠culo exatamente na mesma sequ√™ncia do sistema legado.</p>
                      </div>
                    </div>
                    <div class="rta-grid rta-grid-compact">
                      <div class="input-group">
                        <label for="vin">VIN</label>
                        <input id="vin" name="vin" maxlength="17" class="input-control" placeholder="17 caracteres" />
                        <span class="input-hint">Use letras mai√∫sculas e n√∫meros, sem espa√ßos.</span>
                      </div>
                      <div class="input-group">
                        <label for="body_style">Body Style</label>
                        <input id="body_style" name="body_style" class="input-control" placeholder="Ex: Sedan" />
                      </div>
                      <div class="input-group">
                        <label for="year">Ano</label>
                        <input id="year" name="year" type="number" class="input-control" placeholder="Ex: 2024" />
                      </div>
                      <div class="input-group">
                        <label for="make">Marca</label>
                        <input id="make" name="make" class="input-control" placeholder="Ex: Toyota" />
                      </div>
                      <div class="input-group">
                        <label for="model">Modelo</label>
                        <input id="model" name="model" class="input-control" placeholder="Ex: Corolla" />
                      </div>
                      <div class="input-group">
                        <label for="color">Cor</label>
                        <select id="color" name="color" class="input-control">
                          <option value="">Selecione</option>
                          <option>Black</option>
                          <option>White</option>
                          <option>Brown</option>
                          <option>Blue</option>
                          <option>Yellow</option>
                          <option>Gray</option>
                          <option>Purple</option>
                          <option>Green</option>
                          <option>Orange</option>
                          <option>Red</option>
                          <option>Silver</option>
                          <option>Gold</option>
                        </select>
                      </div>
                      <div class="input-group">
                        <label for="cylinders">Cilindros</label>
                        <input id="cylinders" name="cylinders" type="number" class="input-control" placeholder="Ex: 4" />
                      </div>
                      <div class="input-group">
                        <label for="passengers">Passageiros</label>
                        <input id="passengers" name="passengers" type="number" class="input-control" placeholder="Ex: 5" />
                      </div>
                      <div class="input-group">
                        <label for="doors">Portas</label>
                        <input id="doors" name="doors" type="number" class="input-control" placeholder="Ex: 4" />
                      </div>
                      <div class="input-group">
                        <label for="odometer">Od√¥metro em milhas</label>
                        <input id="odometer" name="odometer" type="number" step="0.1" class="input-control" placeholder="Ex: 25000" />
                      </div>
                    </div>
                  </section>

                  <section class="rta-section" aria-labelledby="rta-title">
                    <div class="rta-section-header">
                      <div class="rta-section-icon" aria-hidden="true">üìù</div>
                      <div>
                        <h4 class="rta-section-title" id="rta-title">T√≠tulo e Seguro</h4>
                        <p class="rta-section-description">Agrupe os dados do t√≠tulo anterior e das datas do seguro antes de gerar o PDF.</p>
                      </div>
                    </div>
                    <fieldset class="rta-fieldset" aria-describedby="title-status-hint">
                      <legend>Status do ve√≠culo em rela√ß√£o ao t√≠tulo</legend>
                      <p id="title-status-hint" class="input-hint">Escolha se o ve√≠culo est√° financiado ou quitado para ajustar os campos necess√°rios.</p>
                      <div class="rta-radio-group">
                        <label class="rta-radio-option">
                          <input type="radio" name="title_status" value="financed" />
                          <span>Financiado</span>
                        </label>
                        <label class="rta-radio-option">
                          <input type="radio" name="title_status" value="paid_off" checked />
                          <span>Quitado</span>
                        </label>
                      </div>
                    </fieldset>
                    <div class="rta-subsections">
                      <div class="rta-subsection" id="previousTitleSection">
                        <h5 class="rta-subsection-title">T√≠tulo anterior</h5>
                        <div class="rta-grid rta-grid-auto">
                          <div class="input-group">
                            <label for="previous_title_number">N√∫mero</label>
                            <input id="previous_title_number" name="previous_title_number" class="input-control" placeholder="Ex: CN539192" required />
                          </div>
                          <div class="input-group">
                            <label for="previous_title_state">Estado</label>
                            <input id="previous_title_state" name="previous_title_state" maxlength="2" class="input-control" placeholder="Ex: MA" />
                          </div>
                          <div class="input-group">
                            <label for="previous_title_country">Pa√≠s</label>
                            <input id="previous_title_country" name="previous_title_country" class="input-control" placeholder="Ex: USA" />
                          </div>
                        </div>
                      </div>

                      <div class="rta-subsection hidden" id="lienholderSection">
                        <h5 class="rta-subsection-title">Informa√ß√µes do Financiamento (Lienholder)</h5>
                        <div class="rta-grid rta-grid-auto">
                          <div class="input-group">
                            <label for="lienholder_code">Lien Code</label>
                            <input id="lienholder_code" name="lienholder_code" class="input-control" placeholder="Ex: C01234" />
                          </div>
                          <div class="input-group">
                            <label for="lienholder_name">Nome da Institui√ß√£o</label>
                            <input id="lienholder_name" name="lienholder_name" class="input-control" placeholder="Ex: Bank of America" />
                          </div>
                          <div class="input-group">
                            <label for="lienholder_address">Endere√ßo</label>
                            <input id="lienholder_address" name="lienholder_address" class="input-control" placeholder="Ex: 123 Bank St, City, ST 12345" />
                          </div>
                        </div>
                      </div>

                      <div class="rta-subsection">
                        <h5 class="rta-subsection-title">Seguro e datas</h5>
                        <div class="rta-grid rta-grid-auto">
                          <div class="input-group">
                            <label for="purchase_date">Data de compra</label>
                            <input id="purchase_date" name="purchase_date" type="date" class="input-control" />
                          </div>
                          <div class="input-group">
                            <label for="insurance_effective_date">In√≠cio da vig√™ncia</label>
                            <input id="insurance_effective_date" name="insurance_effective_date" type="date" class="input-control" />
                          </div>
                          <div class="input-group">
                            <label for="insurance_policy_change_date">Data de altera√ß√£o</label>
                            <input id="insurance_policy_change_date" name="insurance_policy_change_date" type="date" class="input-control" />
                          </div>
                        </div>
                      </div>
                    </div>
                  </section>

                  <section class="rta-section" aria-labelledby="rta-client">
                    <div class="rta-section-header">
                      <div class="rta-section-icon" aria-hidden="true">ÔøΩ</div>
                      <div>
                        <h4 class="rta-section-title" id="rta-client">Cliente</h4>
                        <p class="rta-section-description">Preencha o bloco do cliente seguindo a ordem do RTA web original.</p>
                      </div>
                    </div>
                    <div class="rta-grid rta-grid-wide">
                      <div class="input-group">
                        <label for="owner_name">Nome completo</label>
                        <input id="owner_name" name="owner_name" class="input-control" placeholder="Sobrenome, Nome, Nome do meio" />
                      </div>
                      <div class="input-group">
                        <label for="owner_dob">Nascimento</label>
                        <input id="owner_dob" name="owner_dob" type="date" class="input-control" />
                      </div>
                      <div class="input-group">
                        <label for="owner_license">Licen√ßa / ID / SSN</label>
                        <input id="owner_license" name="owner_license" class="input-control" placeholder="Documento do cliente" />
                      </div>
                      <div class="input-group">
                        <label for="owner_street">Rua</label>
                        <input id="owner_street" name="owner_street" class="input-control" placeholder="Ex: 456 Oak Ave" />
                      </div>
                      <div class="input-group">
                        <label for="owner_city">Cidade</label>
                        <input id="owner_city" name="owner_city" class="input-control" placeholder="Ex: Miami" />
                      </div>
                      <div class="input-group">
                        <label for="owner_state">Estado</label>
                        <input id="owner_state" name="owner_state" maxlength="2" class="input-control" placeholder="Ex: FL" />
                      </div>
                      <div class="input-group">
                        <label for="owner_zipcode">CEP/ZIP</label>
                        <input id="owner_zipcode" name="owner_zipcode" class="input-control" placeholder="Ex: 33101" />
                      </div>
                    </div>
                  </section>

                  <section class="rta-section" aria-labelledby="rta-seller">
                    <div class="rta-section-header">
                      <div class="rta-section-icon" aria-hidden="true">üè™</div>
                      <div>
                        <h4 class="rta-section-title" id="rta-seller">Vendedor</h4>
                        <p class="rta-section-description">Informe os dados do vendedor exatamente como no formul√°rio legado.</p>
                      </div>
                    </div>
                    <div class="rta-grid rta-grid-wide">
                      <div class="input-group">
                        <label for="seller_name">Nome completo</label>
                        <input id="seller_name" name="seller_name" class="input-control" placeholder="Ex: Nome completo" />
                      </div>
                      <div class="input-group">
                        <label for="seller_street">Rua</label>
                        <input id="seller_street" name="seller_street" class="input-control" placeholder="Ex: 123 Main St" />
                      </div>
                      <div class="input-group">
                        <label for="seller_city">Cidade</label>
                        <input id="seller_city" name="seller_city" class="input-control" placeholder="Ex: Boston" />
                      </div>
                      <div class="input-group">
                        <label for="seller_state">Estado</label>
                        <input id="seller_state" name="seller_state" maxlength="2" class="input-control" placeholder="Ex: MA" />
                      </div>
                      <div class="input-group">
                        <label for="seller_zipcode">CEP/ZIP</label>
                        <input id="seller_zipcode" name="seller_zipcode" class="input-control" placeholder="Ex: 02101" />
                      </div>
                      <div class="input-group">
                        <label for="gross_sale_price">Pre√ßo bruto</label>
                        <input id="gross_sale_price" name="gross_sale_price" type="number" step="0.01" class="input-control" placeholder="Ex: 25000.00" />
                      </div>
                    </div>
                  </section>

                  <div class="rta-section">
                    <div class="rta-section-header">
                      <div class="rta-section-icon" aria-hidden="true">‚öôÔ∏è</div>
                      <div>
                        <h4 class="rta-section-title">A√ß√µes</h4>
                        <p class="rta-section-description">Gere o PDF e limpe o formul√°rio quando necess√°rio.</p>
                      </div>
                    </div>
                    <div class="rta-actions">
                      <button type="submit" class="btn-primary">Gerar PDF</button>
                      <button type="reset" class="btn-secondary">Limpar</button>
                      <span id="rtaStatus" class="rta-status-chip">Pronto</span>
                    </div>
                  </div>
                </form>
              
              <div id="rtaActions" class="hidden flex gap-2">
                <button id="rtaOpenBtn" class="btn-secondary">üìÑ Abrir PDF</button>
                <button id="rtaDownloadBtn" class="btn-secondary">üíæ Download novamente</button>
              </div>
              
              <pre id="rtaOutput" class="max-h-72 overflow-y-auto rounded-xl bg-slate-950/60 p-4 text-xs text-slate-300"></pre>
            </div>
          </section>

          <!-- Conte√∫do do Pre√ßo -->
          <section id="quotesView" class="flex-col gap-6" style="display: none;">
            <div class="card space-y-6">
              <header class="space-y-1">
                <p class="text-sm uppercase tracking-wide text-slate-400">Cota√ß√µes</p>
                <h3 class="text-lg font-semibold text-white">Cota√ß√µes salvas</h3>
                <p class="text-sm text-slate-300">Lista de cota√ß√µes salvas no reposit√≥rio ‚Äî abra, edite ou gere pre√ßos a partir daqui.</p>
              </header>

              <div id="quotesList" class="grid gap-4">
                <!-- cards ser√£o renderizados pelo m√≥dulo de cota√ß√µes -->
              </div>
            </div>
          </section>

          <!-- Conte√∫do do Pre√ßo -->
          <section id="priceView" class="flex-col gap-6" style="display: none;">
            <div id="priceGlobalAlert" class="price-alert hidden" role="alert">
              <span class="price-alert-icon" aria-hidden="true">‚ö†Ô∏è</span>
              <span>Por favor, selecione uma seguradora antes de gerar o pre√ßo.</span>
            </div>

            <div class="card space-y-6">
              <header class="space-y-1">
                <p class="text-sm uppercase tracking-wide text-slate-400">Pre√ßo Autom√°tico</p>
                <h3 class="text-lg font-semibold text-white">Gerar imagens de pre√ßo</h3>
                <p class="text-sm text-slate-300">Escolha a cota√ß√£o, configure as taxas e gere modelos multil√≠ngues prontos para enviar ao Trello.</p>
              </header>

              <div class="price-config-grid">
                <div class="price-field">
                  <label for="priceQuoteSelect" class="price-label">Cota√ß√£o / Carta (opcional)</label>
                  <select id="priceQuoteSelect" class="price-select" required>
                    <option value="" disabled selected>Selecione uma cota√ß√£o</option>
                  </select>
                  <p class="price-hint" id="priceQuoteHint">As cota√ß√µes s√£o carregadas automaticamente do reposit√≥rio local. Se preferir gerar apenas o arquivo, deixe em branco.</p>
                </div>

                <div class="price-field">
                  <span class="price-label">Taxa da cota√ß√£o</span>
                  <div class="price-radio-group" role="radiogroup" aria-label="Taxa da cota√ß√£o">
                    <label class="price-radio">
                      <input type="radio" name="priceTax" value="320" checked />
                      <span>$ 320,00</span>
                    </label>
                    <label class="price-radio">
                      <input type="radio" name="priceTax" value="400" />
                      <span>$ 400,00</span>
                    </label>
                    <label class="price-radio">
                      <input type="radio" name="priceTax" value="500" />
                      <span>$ 500,00</span>
                    </label>
                    <label class="price-radio">
                      <input type="radio" name="priceTax" value="custom" data-custom />
                      <span>Personalizada</span>
                    </label>
                  </div>
                  <div class="price-field mt-2">
                    <label for="priceCustomTax" class="price-label">Valor personalizado ($)</label>
                    <input id="priceCustomTax" type="number" class="price-input" placeholder="Ex: 450" min="0" step="0.01" disabled />
                    <p class="price-hint">Defina uma taxa espec√≠fica quando selecionar "Personalizada".</p>
                  </div>
                </div>

                <div class="price-field">
                  <span class="price-label">Seguradora</span>
                  <div class="price-radio-group" id="priceInsurerGroup" role="radiogroup" aria-label="Seguradora">
                    <label class="price-radio">
                      <input type="radio" name="priceInsurer" value="Allstate" checked />
                      <span>Allstate</span>
                    </label>
                    <label class="price-radio">
                      <input type="radio" name="priceInsurer" value="Progressive" />
                      <span>Progressive</span>
                    </label>
                    <label class="price-radio">
                      <input type="radio" name="priceInsurer" value="Geico" />
                      <span>Geico</span>
                    </label>
                    <label class="price-radio">
                      <input type="radio" name="priceInsurer" value="Direct" />
                      <span>Direct</span>
                    </label>
                    <label class="price-radio">
                      <input type="radio" name="priceInsurer" value="StateFarm" />
                      <span>State Farm</span>
                    </label>
                    <label class="price-radio">
                      <input type="radio" name="priceInsurer" value="Liberty" />
                      <span>Liberty</span>
                    </label>
                  </div>
                </div>

                <div class="price-field">
                  <span class="price-label">Idioma da cota√ß√£o</span>
                  <div class="price-radio-group" role="radiogroup" aria-label="Idioma da cota√ß√£o">
                    <label class="price-radio">
                      <input type="radio" name="priceLanguage" value="pt" checked />
                      <span>Portugu√™s</span>
                    </label>
                    <label class="price-radio">
                      <input type="radio" name="priceLanguage" value="en" />
                      <span>Ingl√™s</span>
                    </label>
                    <label class="price-radio">
                      <input type="radio" name="priceLanguage" value="es" />
                      <span>Espanhol</span>
                    </label>
                  </div>
                </div>
              </div>
            </div>

            <div class="price-forms-grid">
              <form id="priceQuitadoForm" class="price-form card" autocomplete="off" novalidate>
                <div class="price-form-header">
                  <h4 class="price-form-title">Ve√≠culo Quitado</h4>
                </div>
                <div class="price-field">
                  <label for="priceQuitadoNome" class="price-label">Nome do cliente</label>
                  <input id="priceQuitadoNome" name="nome" class="price-input" placeholder="Nome do cliente" autocomplete="off" required />
                </div>
                <div class="price-columns">
                  <div class="price-column">
                    <h5 class="price-column-title">B√°sico</h5>
                    <label class="price-label" for="priceEntradaBasico">Entrada ($)</label>
                    <input id="priceEntradaBasico" name="entrada_basico" class="price-input" placeholder="Ex: 250" inputmode="decimal" required />
                    <label class="price-label" for="priceMensalBasico">Mensalidade ($)</label>
                    <input id="priceMensalBasico" name="mensal_basico" class="price-input" placeholder="Ex: 120" inputmode="decimal" required />
                    <label class="price-label" for="priceTotalBasico">Total ($)</label>
                    <input id="priceTotalBasico" name="valor_total_basico" class="price-input" placeholder="Ex: 1500" inputmode="decimal" required />
                  </div>
                  <div class="price-column">
                    <h5 class="price-column-title">Completo</h5>
                    <label class="price-label" for="priceEntradaCompletoQuitado">Entrada ($)</label>
                    <input id="priceEntradaCompletoQuitado" name="entrada_completo" class="price-input" placeholder="Ex: 450" inputmode="decimal" required />
                    <label class="price-label" for="priceMensalCompletoQuitado">Mensalidade ($)</label>
                    <input id="priceMensalCompletoQuitado" name="mensal_completo" class="price-input" placeholder="Ex: 180" inputmode="decimal" required />
                    <label class="price-label" for="priceTotalCompletoQuitado">Total ($)</label>
                    <input id="priceTotalCompletoQuitado" name="valor_total_completo" class="price-input" placeholder="Ex: 2200" inputmode="decimal" required />
                  </div>
                </div>
                <div class="price-actions">
                  <button type="submit" class="btn-primary w-full">Gerar cota√ß√£o quitado</button>
                </div>
              </form>

              <form id="priceFinanciadoForm" class="price-form card" autocomplete="off" novalidate>
                <div class="price-form-header">
                  <h4 class="price-form-title">Ve√≠culo Financiado</h4>
                </div>
                <div class="price-field">
                  <label for="priceFinanciadoNome" class="price-label">Nome do cliente</label>
                  <input id="priceFinanciadoNome" name="nome" class="price-input" placeholder="Nome do cliente" autocomplete="off" required />
                </div>
                <div class="price-column single">
                  <label class="price-label" for="priceEntradaCompletoFinanciado">Entrada ($)</label>
                  <input id="priceEntradaCompletoFinanciado" name="entrada_completo" class="price-input" placeholder="Ex: 560" inputmode="decimal" required />
                  <label class="price-label" for="priceMensalCompletoFinanciado">Mensalidade ($)</label>
                  <input id="priceMensalCompletoFinanciado" name="mensal_completo" class="price-input" placeholder="Ex: 199" inputmode="decimal" required />
                  <label class="price-label" for="priceTotalCompletoFinanciado">Total ($)</label>
                  <input id="priceTotalCompletoFinanciado" name="valor_total_completo" class="price-input" placeholder="Ex: 2800" inputmode="decimal" required />
                </div>
                <div class="price-actions">
                  <button type="submit" class="btn-primary w-full">Gerar cota√ß√£o financiado</button>
                </div>
              </form>
            </div>

            <div id="priceResultPanel" class="card price-result hidden" aria-live="polite">
              <div class="price-result-header">
                <h4 class="price-form-title">Resultado da gera√ß√£o</h4>
                <span id="priceResultStatus" class="price-status">Aguardando</span>
              </div>
              <p id="priceResultMessage" class="price-result-message">Gere uma cota√ß√£o para visualizar os detalhes aqui.</p>
              <dl class="price-result-details">
                <div>
                  <dt>Arquivo gerado</dt>
                  <dd id="priceResultPath">‚Äî</dd>
                </div>
                <div>
                  <dt>Anexado ao Trello</dt>
                  <dd id="priceResultTrello">‚Äî</dd>
                </div>
              </dl>
              <div class="price-result-actions">
                <button id="priceOpenFileBtn" class="btn-secondary" disabled>üìÑ Abrir</button>
                <button id="priceDownloadFileBtn" class="btn-secondary" disabled>üíæ Baixar</button>
                <button id="priceShowFolderBtn" class="btn-secondary" disabled>üóÇÔ∏è Abrir pasta</button>
              </div>
            </div>
          </section>

          <section id="howToView" class="flex-col gap-6" style="display: none;">
            <div class="card space-y-3">
              <header class="space-y-1">
                <p class="text-sm uppercase tracking-wide text-slate-400">Guia r√°pido</p>
                <h3 class="text-lg font-semibold text-white">Como usar cada m√≥dulo</h3>
                <p class="text-sm text-slate-300">Resumo com passos essenciais para configurar e executar cada recurso do Insurance Helper.</p>
              </header>
            </div>

            <div class="grid gap-5 md:grid-cols-2">
              <article class="card space-y-3">
                <header>
                  <h4 class="text-lg font-semibold text-white">Disparos autom√°ticos</h4>
                  <p class="text-sm text-slate-400">Envie mensagens em massa pelo WhatsApp Web.</p>
                </header>
                <ol class="howto-steps">
                  <li>Selecione ou cadastre um operador na tela inicial.</li>
                  <li>Configure mensagens e limite de envios no painel lateral.</li>
                  <li>Inicie a automa√ß√£o para abrir o WhatsApp Web e acompanhar os logs.</li>
                </ol>
                <p class="howto-note">Dispon√≠vel apenas para operadores marcados como administradores.</p>
              </article>

              <article class="card space-y-3">
                <header>
                  <h4 class="text-lg font-semibold text-white">RTA autom√°tico</h4>
                  <p class="text-sm text-slate-400">Gere documentos RTA completos em PDF.</p>
                </header>
                <ol class="howto-steps">
                  <li>Preencha os dados do segurado, ve√≠culo e cobertura no formul√°rio.</li>
                  <li>Revise os campos obrigat√≥rios destacados.</li>
                  <li>Gere o arquivo e use as a√ß√µes para abrir, salvar ou anexar.</li>
                </ol>
                <p class="howto-note">Use o status no topo do cart√£o para acompanhar o progresso.</p>
              </article>

              <article class="card space-y-3">
                <header>
                  <h4 class="text-lg font-semibold text-white">Integra√ß√£o Trello</h4>
                  <p class="text-sm text-slate-400">Crie cards com dados completos e anexos.</p>
                </header>
                <ol class="howto-steps">
                  <li>Preencha dados do cliente, ve√≠culos e drivers nas se√ß√µes do formul√°rio.</li>
                  <li>Valide campos obrigat√≥rios ‚Äî erros aparecem logo abaixo de cada campo.</li>
                  <li>Envie para gerar o card e receber o link de acompanhamento.</li>
                </ol>
                <p class="howto-note">Reaproveite cota√ß√µes usando o bot√£o ‚ÄúEditar‚Äù na aba correspondente.</p>
              </article>

              <article class="card space-y-3">
                <header>
                  <h4 class="text-lg font-semibold text-white">Pre√ßo autom√°tico</h4>
                  <p class="text-sm text-slate-400">Monte artes com taxas e planos customizados.</p>
                </header>
                <ol class="howto-steps">
                  <li>Escolha uma cota√ß√£o opcional e a seguradora desejada.</li>
                  <li>Selecione a taxa sugerida ou informe um valor personalizado.</li>
                  <li>Preencha valores dos planos e gere a imagem com as a√ß√µes finais.</li>
                </ol>
                <p class="howto-note">O painel de resultado indica se o arquivo foi anexado ao Trello e o caminho salvo.</p>
              </article>

              <article class="card space-y-3 md:col-span-2">
                <header>
                  <h4 class="text-lg font-semibold text-white">Cota√ß√µes salvas</h4>
                  <p class="text-sm text-slate-400">Gerencie registros para reutilizar dados em outros m√≥dulos.</p>
                </header>
                <ol class="howto-steps">
                  <li>Revise as informa√ß√µes principais de cada cota√ß√£o na grade.</li>
                  <li>Use ‚ÄúCotar‚Äù para rodar automa√ß√µes espec√≠ficas da seguradora.</li>
                  <li>Prefill no Trello via ‚ÄúEditar‚Äù ou exclua entradas com ‚ÄúApagar‚Äù.</li>
                </ol>
                <p class="howto-note">A lista √© atualizada automaticamente ao abrir a aba ou gerar uma nova cota√ß√£o.</p>
              </article>
            </div>
          </section>

          <!-- Conte√∫do do Trello -->
          <section id="trelloView" class="flex-col gap-6" style="display: none;">
            <div class="card space-y-6">
              <header class="space-y-1">
                <p class="text-sm uppercase tracking-wide text-slate-400">Integra√ß√£o Trello</p>
                <h3 class="text-lg font-semibold text-white">Criar card autom√°tico</h3>
                <p class="text-sm text-slate-300">Preencha os dados do cliente, ve√≠culos, drivers e anexos para gerar um card no Trello.</p>
              </header>

              <form id="trelloForm" class="flex flex-col gap-6" novalidate>
                <section class="rta-section" aria-labelledby="trello-customer">
                  <div class="rta-section-header">
                    <div class="rta-section-icon" aria-hidden="true">üë§</div>
                    <div>
                      <h4 class="rta-section-title" id="trello-customer">Dados do cliente</h4>
                      <p class="rta-section-description">Informa√ß√µes principais do segurado utilizadas na descri√ß√£o do card.</p>
                    </div>
                  </div>
                  <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div class="input-group">
                      <label for="trelloEstadoCivil">Estado civil</label>
                      <div class="rta-radio-group" id="trelloEstadoCivilGroup">
                        <label class="rta-radio-option">
                          <input type="radio" name="estado_civil" value="Solteiro(a)" checked />
                          <span>Solteiro(a)</span>
                        </label>
                        <label class="rta-radio-option">
                          <input type="radio" name="estado_civil" value="Casado(a)" />
                          <span>Casado(a)</span>
                        </label>
                        <label class="rta-radio-option">
                          <input type="radio" name="estado_civil" value="Divorciado(a)" />
                          <span>Divorciado(a)</span>
                        </label>
                      </div>
                      <p class="trello-field-error" data-error="estado_civil"></p>
                    </div>

                    <div class="input-group">
                      <label for="trelloGenero">G√™nero</label>
                      <div class="rta-radio-group" id="trelloGeneroGroup">
                        <label class="rta-radio-option">
                          <input type="radio" name="genero" value="Masculino" checked />
                          <span>Masculino</span>
                        </label>
                        <label class="rta-radio-option">
                          <input type="radio" name="genero" value="Feminino" />
                          <span>Feminino</span>
                        </label>
                      </div>
                      <p class="trello-field-error" data-error="genero"></p>
                    </div>

                    <div class="input-group">
                      <label for="trelloNome">Nome completo</label>
                      <input id="trelloNome" name="nome" class="input-control" placeholder="Nome e sobrenome" data-required="true" />
                      <p class="trello-field-error" data-error="nome"></p>
                    </div>
                    <div class="input-group">
                      <label for="trelloDocumento">Documento</label>
                      <input id="trelloDocumento" name="documento" class="input-control" placeholder="Driver License / CNH" />
                    </div>
                    <div class="input-group">
                      <label for="trelloDocumentoEstado">Estado do documento</label>
                      <select id="trelloDocumentoEstado" name="documento_estado" class="input-control" data-required="true">
                        <option value="">Selecione...</option>
                      </select>
                      <p class="trello-field-error" data-error="documento_estado"></p>
                    </div>
                    <div class="input-group">
                      <label for="trelloNascimento">Data de nascimento</label>
                      <input id="trelloNascimento" name="data_nascimento" type="date" class="input-control" />
                    </div>
                    <div class="input-group md:col-span-2">
                      <label for="trelloEnderecoRua">Rua</label>
                      <input id="trelloEnderecoRua" name="endereco_rua" class="input-control" placeholder="Rua / Street" data-required="true" />
                      <p class="trello-field-error" data-error="endereco_rua"></p>
                    </div>
                    <div class="input-group">
                      <label for="trelloEnderecoApt">Apt / Suite</label>
                      <input id="trelloEnderecoApt" name="endereco_apt" class="input-control" placeholder="Apt, Suite, etc." />
                    </div>
                    <div class="input-group">
                      <label for="trelloEnderecoCidade">Cidade</label>
                      <input id="trelloEnderecoCidade" name="endereco_cidade" class="input-control" placeholder="Cidade" data-required="true" />
                      <p class="trello-field-error" data-error="endereco_cidade"></p>
                    </div>
                    <div class="input-group">
                      <label for="trelloEnderecoEstado">Estado</label>
                      <select id="trelloEnderecoEstado" name="endereco_estado" class="input-control" data-required="true">
                        <option value="">Selecione...</option>
                      </select>
                      <p class="trello-field-error" data-error="endereco_estado"></p>
                    </div>
                    <div class="input-group">
                      <label for="trelloEnderecoZip">ZIP Code</label>
                      <input id="trelloEnderecoZip" name="endereco_zipcode" class="input-control" placeholder="ZIP" data-required="true" />
                      <p class="trello-field-error" data-error="endereco_zipcode"></p>
                    </div>
                    <div class="input-group">
                      <label for="trelloTempoSeguro">Tempo de seguro</label>
                      <select id="trelloTempoSeguro" name="tempo_de_seguro" class="input-control">
                        <option value="">Selecione</option>
                        <option value="Menos de 6 meses">Menos de 6 meses</option>
                        <option value="6 meses/1 ano">6 meses/1 ano</option>
                        <option value="1-3 anos">1-3 anos</option>
                        <option value="3-5 anos">3-5 anos</option>
                        <option value="5+ anos">5+ anos</option>
                      </select>
                    </div>
                    <div class="input-group">
                      <label for="trelloTempoEndereco">Tempo no endere√ßo</label>
                      <select id="trelloTempoEndereco" name="tempo_no_endereco" class="input-control">
                        <option value="">Selecione</option>
                        <option value="Menos de 1 ano">Menos de 1 ano</option>
                        <option value="Mais de 1 ano">Mais de 1 ano</option>
                      </select>
                    </div>
                  </div>
                </section>

                <section id="trelloSpouseSection" class="rta-section" aria-labelledby="trello-spouse" style="display: none;">
                  <div class="rta-section-header">
                    <div class="rta-section-icon" aria-hidden="true">üíç</div>
                    <div>
                      <h4 class="rta-section-title" id="trello-spouse">C√¥njuge</h4>
                      <p class="rta-section-description">Preencha os dados do c√¥njuge quando o estado civil for Casado(a).</p>
                    </div>
                  </div>
                  <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <div class="input-group">
                      <label for="trelloNomeConjuge">Nome</label>
                      <input id="trelloNomeConjuge" name="nome_conjuge" class="input-control" />
                    </div>
                    <div class="input-group">
                      <label for="trelloDocumentoConjuge">Documento</label>
                      <input id="trelloDocumentoConjuge" name="documento_conjuge" class="input-control" />
                    </div>
                    <div class="input-group">
                      <label for="trelloNascimentoConjuge">Data de nascimento</label>
                      <input id="trelloNascimentoConjuge" name="data_nascimento_conjuge" type="date" class="input-control" />
                    </div>
                  </div>
                </section>

                <section class="rta-section" aria-labelledby="trello-vehicles">
                  <div class="rta-section-header">
                    <div class="rta-section-icon" aria-hidden="true">üöó</div>
                    <div>
                      <h4 class="rta-section-title" id="trello-vehicles">Ve√≠culos</h4>
                      <p class="rta-section-description">Adicione todos os ve√≠culos relacionados ao cliente.</p>
                    </div>
                  </div>
                  <div class="flex items-center justify-between mb-3">
                    <p class="text-sm text-slate-300">Inclua pelo menos um ve√≠culo com VIN v√°lido.</p>
                    <button type="button" id="trelloAddVehicle" class="btn-secondary">+ Adicionar ve√≠culo</button>
                  </div>
                  <div class="space-y-4" id="trelloVehiclesContainer"></div>
                  <p class="trello-field-error" data-error="veiculos"></p>
                </section>

                <section class="rta-section" aria-labelledby="trello-drivers">
                  <div class="rta-section-header">
                    <div class="rta-section-icon" aria-hidden="true">üßç</div>
                    <div>
                      <h4 class="rta-section-title" id="trello-drivers">Drivers adicionais</h4>
                      <p class="rta-section-description">Cadastre outros condutores relacionados √† ap√≥lice.</p>
                    </div>
                  </div>
                  <div class="flex items-center justify-between mb-3">
                    <p class="text-sm text-slate-300">Preencha apenas se houver outros motoristas autorizados.</p>
                    <button type="button" id="trelloAddDriver" class="btn-secondary">+ Adicionar driver</button>
                  </div>
                  <div class="space-y-4" id="trelloDriversContainer"></div>
                </section>

                <section class="rta-section" aria-labelledby="trello-observacoes">
                  <div class="rta-section-header">
                    <div class="rta-section-icon" aria-hidden="true">üìù</div>
                    <div>
                      <h4 class="rta-section-title" id="trello-observacoes">Observa√ß√µes</h4>
                      <p class="rta-section-description">Informa√ß√µes adicionais relevantes para o atendimento.</p>
                    </div>
                  </div>
                  <textarea id="trelloObservacoes" name="observacoes" class="input-control" rows="4" placeholder="Informa√ß√µes adicionais"></textarea>
                </section>

                <section class="rta-section" aria-labelledby="trello-attachments">
                  <div class="rta-section-header">
                    <div class="rta-section-icon" aria-hidden="true">üìé</div>
                    <div>
                      <h4 class="rta-section-title" id="trello-attachments">Imagens (opcional)</h4>
                      <p class="rta-section-description">Selecione imagens para anexar automaticamente ao card.</p>
                    </div>
                  </div>
                  <input type="file" id="trelloImages" accept="image/*" multiple class="block w-full text-sm text-slate-200 file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:text-sm file:font-semibold file:bg-slate-800 file:text-slate-200 hover:file:bg-slate-700" />
                  <p id="trelloImagesInfo" class="text-xs text-slate-400 mt-2"></p>
                  <div id="trelloImagePreview" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3"></div>
                </section>

                <div class="flex flex-wrap items-center gap-3">
                  <button type="submit" id="trelloSubmitBtn" class="btn-primary">Criar card no Trello</button>
                  <button type="button" id="trelloResetBtn" class="btn-secondary">Limpar</button>
                  <span id="trelloStatus" class="rta-status-chip">Aguardando</span>
                </div>

                <div id="trelloResult" class="hidden rounded-xl border border-slate-700 bg-slate-950/60 p-4 text-sm text-slate-200"></div>
              </form>
            </div>

            <template id="trelloVehicleTemplate">
              <div class="trello-vehicle-card border border-slate-700 rounded-xl bg-slate-950/60 p-4 space-y-4">
                <div class="flex items-center justify-between">
                  <h5 class="text-sm font-semibold text-slate-200">Ve√≠culo <span data-role="vehicle-index">1</span></h5>
                  <button type="button" class="btn-secondary trello-remove-vehicle">Remover</button>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                  <div class="input-group">
                    <label>VIN</label>
                    <input type="text" class="input-control trello-input" data-field="vin" maxlength="17" placeholder="VIN" />
                    <p class="trello-field-error" data-role="error"></p>
                    <p class="text-xs text-slate-400 italic" data-role="vehicle-label"></p>
                  </div>
                  <div class="input-group">
                    <label>Placa</label>
                    <input type="text" class="input-control trello-input" data-field="placa" placeholder="Placa" />
                  </div>
                  <div class="input-group">
                    <label>Financiado / Pago</label>
                    <select class="input-control trello-input" data-field="financiado">
                      <option value="">Selecione</option>
                      <option value="Financiado">Financiado</option>
                      <option value="Quitado">Quitado</option>
                    </select>
                  </div>
                  <div class="input-group md:col-span-3">
                    <label>Tempo com o ve√≠culo</label>
                    <select class="input-control trello-input" data-field="tempo_com_veiculo">
                      <option value="">Selecione</option>
                      <option value="Menos de 6 meses">Menos de 6 meses</option>
                      <option value="6 meses/1 ano">6 meses/1 ano</option>
                      <option value="1-3 anos">1-3 anos</option>
                      <option value="3-5 anos">3-5 anos</option>
                      <option value="5+ anos">5+ anos</option>
                    </select>
                  </div>
                </div>
                <input type="hidden" data-field="ano" />
                <input type="hidden" data-field="marca" />
                <input type="hidden" data-field="modelo" />
              </div>
            </template>

            <template id="trelloDriverTemplate">
              <div class="trello-driver-card border border-slate-700 rounded-xl bg-slate-950/60 p-4 space-y-4">
                <div class="flex items-center justify-between">
                  <h5 class="text-sm font-semibold text-slate-200">Driver adicional</h5>
                  <button type="button" class="btn-secondary trello-remove-driver">Remover</button>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-5 gap-4">
                  <div class="input-group md:col-span-2">
                    <label>Nome</label>
                    <input type="text" class="input-control trello-driver-input" data-field="nome" placeholder="Nome completo" />
                  </div>
                  <div class="input-group">
                    <label>G√™nero</label>
                    <div class="rta-radio-group">
                      <label class="rta-radio-option text-xs">
                        <input type="radio" class="trello-driver-input" data-field="genero" value="Masculino" />
                        <span>Masculino</span>
                      </label>
                      <label class="rta-radio-option text-xs">
                        <input type="radio" class="trello-driver-input" data-field="genero" value="Feminino" />
                        <span>Feminino</span>
                      </label>
                    </div>
                  </div>
                  <div class="input-group">
                    <label>Documento</label>
                    <input type="text" class="input-control trello-driver-input" data-field="documento" placeholder="Documento" />
                  </div>
                  <div class="input-group">
                    <label>Data de nascimento</label>
                    <input type="date" class="input-control trello-driver-input" data-field="data_nascimento" />
                  </div>
                  <div class="input-group">
                    <label>Parentesco</label>
                    <select class="input-control trello-driver-input" data-field="parentesco">
                      <option value="">Selecione</option>
                      <option value="C√¥njuge">C√¥njuge</option>
                      <option value="Filho(a)">Filho(a)</option>
                      <option value="Pai/M√£e">Pai/M√£e</option>
                      <option value="Outro">Outro</option>
                    </select>
                  </div>
                </div>
              </div>
            </template>
          </section>

        </div>
      </main>
    </div>
  </div>

    <!-- Modal para criar perfil -->
    <div id="profileModal" class="modal-overlay hidden">
      <div class="modal-content max-w-3xl">
        <div class="modal-header">
          <h3 class="text-xl font-semibold text-white">Adicionar novo perfil</h3>
          <button id="closeProfileModalBtn" class="text-slate-400 hover:text-white text-2xl leading-none">√ó</button>
        </div>

        <form id="profileForm" class="modal-body space-y-4">
          <div class="grid gap-4 md:grid-cols-2">
            <div>
              <label for="profileNameInput" class="block text-sm font-medium text-slate-300 mb-1">Nome do operador</label>
              <input
                type="text"
                id="profileNameInput"
                class="w-full rounded-lg bg-slate-800 border border-slate-700 text-white px-4 py-2 focus:outline-none focus:ring-2 focus:ring-brand-500"
                placeholder="Ex: Joana"
                required
              />
            </div>
            <div>
              <label for="profileIdInput" class="block text-sm font-medium text-slate-300 mb-1">Identificador interno</label>
              <input
                type="text"
                id="profileIdInput"
                class="w-full rounded-lg bg-slate-800 border border-slate-700 text-white px-4 py-2 focus:outline-none focus:ring-2 focus:ring-brand-500"
                placeholder="use apenas letras, n√∫meros ou h√≠fen"
                required
              />
              <p class="text-xs text-slate-400 mt-1">Esse identificador precisa ser √∫nico e ser√° usado para salvar sess√µes.</p>
            </div>
          </div>

          <!-- Campo de mensagem padr√£o removido por n√£o ser mais obrigat√≥rio/necess√°rio -->

          <div>
            <label for="profileImageInput" class="block text-sm font-medium text-slate-300 mb-1">Imagem do perfil (opcional)</label>
            <div class="flex gap-2">
              <input
                type="text"
                id="profileImageInput"
                class="flex-1 rounded-lg bg-slate-800 border border-slate-700 text-white px-4 py-2 focus:outline-none focus:ring-2 focus:ring-brand-500"
                placeholder="Selecione um arquivo de imagem ou deixe em branco"
              />
              <button type="button" id="selectProfileImageBtn" class="btn-secondary whitespace-nowrap">
                üìÅ Selecionar
              </button>
            </div>
            <p class="text-xs text-slate-400 mt-1">Formatos aceitos: PNG ou JPG.</p>
            <p class="text-xs text-slate-500">Se voc√™ n√£o escolher uma imagem, aplicaremos automaticamente um avatar padr√£o.</p>
          </div>

          <label class="flex items-center gap-2 text-sm text-slate-300">
            <input type="checkbox" id="profileAdminInput" class="rounded border-slate-600" />
            Definir este operador como administrador (libera disparos autom√°ticos)
          </label>

          <p id="profileError" class="hidden text-sm text-rose-400"></p>
        </form>

        <div class="modal-footer">
          <button id="cancelProfileModalBtn" class="btn-secondary" type="button">Cancelar</button>
          <button id="saveProfileBtn" class="btn-primary" type="submit" form="profileForm">Criar perfil</button>
        </div>
      </div>
    </div>

    <!-- Modal de senha para admin -->
    <div id="adminPasswordModal" class="modal-overlay hidden">
      <div class="modal-content max-w-md">
        <div class="modal-header">
          <h3 class="text-xl font-semibold text-white">Acesso Administrador</h3>
        </div>
        
        <div class="modal-body">
          <p class="text-sm text-slate-300 mb-4">Digite a senha de administrador para acessar este perfil:</p>
          <input 
            type="password" 
            id="adminPasswordInput" 
            class="w-full rounded-lg bg-slate-800 border border-slate-700 text-white px-4 py-2 focus:outline-none focus:ring-2 focus:ring-brand-500"
            placeholder="Senha"
            autocomplete="off"
          />
          <p id="adminPasswordError" class="hidden text-sm text-rose-400 mt-2"></p>
        </div>
        
        <div class="modal-footer">
          <button id="cancelAdminPasswordBtn" class="btn-secondary" type="button">Cancelar</button>
          <button id="submitAdminPasswordBtn" class="btn-primary" type="button">Confirmar</button>
        </div>
      </div>
    </div>

    <!-- Modal para editar perfil -->
    <div id="profileEditModal" class="modal-overlay hidden">
      <div class="modal-content max-w-3xl">
        <div class="modal-header">
          <h3 class="text-xl font-semibold text-white">Editar perfil</h3>
          <button id="closeProfileEditModalBtn" class="text-slate-400 hover:text-white text-2xl leading-none">√ó</button>
        </div>

        <form id="profileEditForm" class="modal-body space-y-4">
          <div class="grid gap-4 md:grid-cols-2">
            <div>
              <label for="profileEditNameInput" class="block text-sm font-medium text-slate-300 mb-1">Nome do operador</label>
              <input
                type="text"
                id="profileEditNameInput"
                class="w-full rounded-lg bg-slate-800 border border-slate-700 text-white px-4 py-2 focus:outline-none focus:ring-2 focus:ring-brand-500"
                placeholder="Ex: Joana"
                required
              />
            </div>
            <div>
              <label class="block text-sm font-medium text-slate-300 mb-1">Identificador (fixo)</label>
              <input
                type="text"
                id="profileEditIdDisplay"
                class="w-full rounded-lg bg-slate-900 border border-slate-800 text-slate-400 px-4 py-2"
                disabled
              />
            </div>
          </div>

          <div>
            <label for="profileEditImageInput" class="block text-sm font-medium text-slate-300 mb-1">Imagem do perfil</label>
            <div class="flex gap-2">
              <input
                type="text"
                id="profileEditImageInput"
                class="flex-1 rounded-lg bg-slate-800 border border-slate-700 text-white px-4 py-2 focus:outline-none focus:ring-2 focus:ring-brand-500"
                placeholder="Selecione um arquivo de imagem ou deixe vazio para usar o avatar padr√£o"
              />
              <button type="button" id="selectProfileEditImageBtn" class="btn-secondary whitespace-nowrap">
                üìÅ Selecionar
              </button>
            </div>
            <p class="text-xs text-slate-400 mt-1">Deixe vazio para usar o avatar padr√£o.</p>
          </div>

          <p id="profileEditError" class="hidden text-sm text-rose-400"></p>
        </form>

        <div class="modal-footer">
          <button id="cancelProfileEditModalBtn" class="btn-secondary" type="button">Cancelar</button>
          <button id="saveProfileEditBtn" class="btn-primary" type="submit" form="profileEditForm">Salvar altera√ß√µes</button>
        </div>
      </div>
    </div>

    <!-- Modal para editar/adicionar mensagem -->
    <div id="messageModal" class="modal-overlay hidden">
      <div class="modal-content">
        <div class="modal-header">
          <h3 id="modalTitle" class="text-xl font-semibold text-white">Adicionar mensagem</h3>
          <button id="closeModalBtn" class="text-slate-400 hover:text-white text-2xl leading-none">√ó</button>
        </div>
        
        <div class="modal-body">
          <div class="space-y-4">
            <div>
              <label for="messageText" class="block text-sm font-medium text-slate-300 mb-2">Texto da mensagem</label>
              <textarea 
                id="messageText" 
                rows="10" 
                class="w-full rounded-lg bg-slate-800 border border-slate-700 text-white px-4 py-2 focus:outline-none focus:ring-2 focus:ring-brand-500"
                placeholder="Digite a mensagem aqui..."
              ></textarea>
            </div>
            
            <div>
              <label for="messageImage" class="block text-sm font-medium text-slate-300 mb-2">Imagem (opcional)</label>
              <div class="flex gap-2">
                <input 
                  type="text" 
                  id="messageImage" 
                  class="flex-1 rounded-lg bg-slate-800 border border-slate-700 text-white px-4 py-2 focus:outline-none focus:ring-2 focus:ring-brand-500"
                  placeholder="Clique em 'Selecionar' ou cole o caminho completo"
                />
                <button 
                  type="button"
                  id="selectImageBtn" 
                  class="btn-secondary whitespace-nowrap"
                >
                  üìÅ Selecionar
                </button>
              </div>
              <p class="text-xs text-slate-400 mt-1">Deixe vazio para usar a imagem padr√£o do perfil</p>
            </div>
          </div>
        </div>
        
        <div class="modal-footer">
          <button id="cancelModalBtn" class="btn-secondary">Cancelar</button>
          <button id="saveMessageBtn" class="btn-primary">Salvar</button>
        </div>
      </div>
    </div>

    <script src="renderer.js"></script>
    <script type="module" src="price/index.js"></script>
    <script type="module" src="quotes/index.js"></script>
  </body>
</html>
